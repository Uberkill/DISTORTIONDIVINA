<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Distortion Corp Secure Terminal - Unofficial fan project for Project Moon & Mili.">
    <title>DISTORTION CORP // SECURE TERMINAL</title>

    <!-- PRECONNECT TO ORIGINS (Reduces Connection Latency) -->
    <!-- PRECONNECT TO ORIGINS (Reduces Connection Latency) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://placehold.co">

    <!-- OPTIMIZATION: CRITICAL FONTS & ASSETS (English/UI) -->
    <!-- Loaded immediately with high priority for Above-the-Fold content -->
    <link rel="preload"
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Share+Tech+Mono&display=swap"
        as="style">
    <link rel="preload" href="./images/distortion_logo.png" as="image">
    <link rel="preload" href="./images/jtnx9pe.jpeg" as="image">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Share+Tech+Mono&display=swap"
        rel="stylesheet">

    <!-- OPTIMIZATION: DEFERRED CJK FONTS (~105KB CSS Savings on Initial Load) -->
    <!-- Loaded asynchronously (non-blocking) for localization support -->
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Noto+Sans+KR:wght@400;700&display=swap"
        rel="stylesheet" media="print" onload="this.media='all'">
    <noscript>
        <link
            href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Noto+Sans+KR:wght@400;700&display=swap"
            rel="stylesheet">
    </noscript>

    <!-- DEFER SCRIPT (Eliminates Render Blocking) -->
    <script src="https://unpkg.com/lucide@latest" defer></script>

    <script>if ("serviceWorker" in navigator) navigator.serviceWorker.getRegistrations().then(r => r.forEach(reg => reg.unregister()));</script>
    <link rel="stylesheet" href="css/style.css?v=nuclear">

    <!-- VERCEL ANALYTICS & SPEED INSIGHTS -->
    <script>
        window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>
    <script defer src="/_vercel/speed-insights/script.js"></script>

    <!-- RESTORED V1 STYLES -->
    <style>
        /* BOOT CONSOLE */
        .boot-console {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            max-width: 600px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 1rem;
            color: #ff003c;
            text-align: left;
            z-index: 20001;
            pointer-events: none;
        }

        .boot-line {
            opacity: 0;
            animation: typeLine 0.1s forwards;
            margin-bottom: 5px;
            border-right: 2px solid var(--gold-primary);
            width: fit-content;
            padding-right: 5px;
        }

        @keyframes typeLine {
            to {
                opacity: 1;
            }
        }

        /* SECURITY TOAST */
        .security-toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(20, 0, 0, 0.95);
            border: 1px solid red;
            padding: 15px 25px;
            border-radius: 4px;
            box-shadow: 0 0 30px rgba(255, 0, 0, 0.4);
            z-index: 99999;
            transform: translateX(100%);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            align-items: center;
            gap: 15px;
            pointer-events: none;
        }

        .security-toast.visible {
            transform: translateX(0);
        }

        /* RIPPLE EFFECT */
        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: scale(0);
            animation: ripple-anim 0.6s linear;
            pointer-events: none;
            z-index: 1000;
        }

        @keyframes ripple-anim {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

        /* LOGIN SHAKE */
        @keyframes error-shake {

            0%,
            100% {
                transform: translateX(0);
            }

            20%,
            60% {
                transform: translateX(-10px);
            }

            40%,
            80% {
                transform: translateX(10px);
            }
        }

        .error-shake {
            animation: error-shake 0.4s ease-in-out;
            border-color: red !important;
            box-shadow: 0 0 20px red !important;
        }

        /* BIG ENTER BUTTON */
        .big-enter-btn {
            margin-top: 0;
            /* Modified */
            background: transparent;
            border: 1px solid var(--gold-dim);
            padding: 15px 40px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            max-width: 300px;
            margin-left: auto;
            margin-right: auto;
        }

        .big-enter-btn:hover {
            background: rgba(212, 175, 55, 0.1);
            border-color: var(--gold-primary);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.2);
        }

        .big-enter-btn .btn-main {
            font-family: 'Cinzel';
            font-size: 1.2rem;
            color: #fff;
            letter-spacing: 2px;
        }

        /* CAROUSEL ARROWS */
        .brief-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid var(--gold-dim);
            color: var(--gold-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            transition: all 0.2s;
            opacity: 0;
        }

        .brief-frame:hover .brief-nav-btn {
            opacity: 1;
        }

        .brief-nav-btn:hover {
            background: var(--gold-primary);
            color: #000;
            box-shadow: 0 0 15px var(--gold-primary);
        }

        .brief-nav-prev {
            left: 10px;
        }

        .brief-nav-next {
            right: 10px;
        }

        /* NUCLEAR CSS FAILSAFE: Force remove loader via CSS animation in case JS fails */
        @keyframes forceHideLoader {
            0% {
                opacity: 1;
                visibility: visible;
            }

            90% {
                opacity: 1;
                visibility: visible;
            }

            100% {
                opacity: 0;
                visibility: hidden;
                pointer-events: none;
                z-index: -1;
            }
        }

        @keyframes forceShowLogin {
            0% {
                opacity: 0;
                z-index: 1;
            }

            100% {
                opacity: 1;
                visibility: visible;
                z-index: 10000;
            }
        }

        #system-loader {
            animation: forceHideLoader 3s forwards !important;
            z-index: 9999;
            pointer-events: none !important;
            /* Never block interactions */
        }

        #system-loader * {
            pointer-events: none !important;
        }

        /* Ensure login screen is visible even if JS doesn't toggle classes */
        #login-screen {
            display: flex !important;
            /* Animation removed to prevent test race conditions */
            opacity: 1;
            z-index: 1;
            /* Initially below loader */
        }

        /* Force hide login screen when actually logged in */
        body.logged-in #login-screen {
            display: none !important;
            pointer-events: none !important;
            z-index: -9999 !important;
        }

        /* Force show desktop when logged in (prevents black screen gap) */
        body.logged-in #desktop-screen {
            opacity: 1 !important;
            pointer-events: auto !important;
            z-index: 10 !important;
        }
    </style>
</head>

<body id="main-body">

    <div id="system-loader">
        <div class="loader-spinner"></div>
        <div class="loader-text">INITIALIZING SYSTEM...</div>
    </div>

    <div class="crt-overlay"></div>
    <div class="vignette"></div>



    <!-- WRAPPER FOR ROTATION -->
    <div id="app-container">

        <!-- LOGIN SCREEN -->
        <div id="login-screen">
            <!-- Mode Switcher on Login -->
            <div class="absolute-top-right">
                <button class="ui-scale-btn" onclick="System.toggleUIScale()" aria-label="Toggle Interface Size">
                    [SIZE: NORMAL]
                </button>
                <button class="mode-switch-btn" onclick="System.toggleMode()" aria-label="Toggle View Mode">
                    [UI_MODE_LOADING]
                </button>
            </div>

            <!-- Title Moved Outside Box -->
            <div class="login-header-wrapper">
                <img src="./images/distortion_logo.png" alt="DISTORTION CORP LOGO" class="login-logo-img" width="395"
                    height="504" fetchpriority="high">
                <div class="login-sub-header">SECURE TERMINAL ACCESS // LEVEL 5 CLEARANCE</div>
            </div>

            <div class="login-box">
                <div class="login-box-right-border"></div> <!-- Added for symmetry -->

                <div class="lang-selector">
                    <button class="lang-btn active" onmouseenter="AudioManager.play('hover')"
                        onclick="System.setLanguage('en'); AudioManager.play('click')"
                        aria-label="Select English">EN</button>
                    <button class="lang-btn" onmouseenter="AudioManager.play('hover')"
                        onclick="System.setLanguage('ko'); AudioManager.play('click')"
                        aria-label="Select Korean">한국어</button>
                    <button class="lang-btn" onmouseenter="AudioManager.play('hover')"
                        onclick="System.setLanguage('ja'); AudioManager.play('click')"
                        aria-label="Select Japanese">日本語</button>
                </div>

                <p data-i18n="login_sub"
                    style="font-size: 1rem; color: #888; font-family: 'Share Tech Mono'; letter-spacing: 2px;">
                    SECURE ACCESS TERMINAL v9.4</p>

                <!-- NEW: OPTIMIZATION NOTICE -->
                <p data-i18n="login_opt"
                    style="font-size: 0.8rem; color: #555; font-family: 'Share Tech Mono'; letter-spacing: 1px;">
                    >> TERMINAL OPTIMIZED FOR DESKTOP DISPLAY</p>

                <!-- LOGIN INPUT BAR -->
                <div class="login-input-wrapper" id="login-wrapper">
                    <div class="login-input-container">
                        <span class="input-prefix">></span>
                        <input type="text" id="login-input" class="login-input" placeholder="ENTER_ACCESS_CODE..."
                            autocomplete="off" spellcheck="false" aria-label="Access Code Input">
                    </div>
                </div>

                <!-- NEW BIG ENTER BUTTON -->
                <button class="big-enter-btn" onclick="System.login()" aria-label="Initialize Connection">
                    <span class="btn-main">PRESS TO ENTER</span>
                </button>

                <div id="login-message" class="login-msg" data-i18n="login_verifying">VERIFYING CREDENTIALS...</div>
            </div>

            <!-- NEW: AUTO LOGIN PROGRESS -->
            <div class="login-progress-container" aria-hidden="true">
                <div id="auto-login-bar" class="login-progress-bar"></div>
            </div>
        </div>
    </div>

    <!-- DESKTOP SCREEN -->
    <div id="desktop-screen">

        <!-- OS Top Bar -->
        <div class="os-bar">
            <div style="display: flex; align-items: center;">
                <div data-i18n="os_connected" style="margin-right: 20px;">DISTORTION_OS // CONNECTED</div>
                <button class="ui-scale-btn" onclick="System.toggleUIScale()" aria-label="Toggle Interface Size">
                    [SIZE]
                </button>
                <button class="mode-switch-btn" onclick="System.toggleMode()" aria-label="Toggle View Mode">
                    [UI_MODE]
                </button>
            </div>

            <div class="top-right-group">
                <div id="clock" aria-label="System Clock">00:00:00</div>
            </div>
        </div>

        <!-- Desktop Icons -->
        <div class="desktop-icons-container">
            <div class="desktop-icon" data-window="win-overview" tabindex="0" role="button" aria-label="Project Brief">
                <div class="icon-img"><i data-lucide="file-text" width="64" height="64"></i></div>
                <div data-i18n="icon_overview" class="icon-label">PROJECT_BRIEF.LOG</div>
            </div>

            <div class="desktop-icon" data-window="win-archive" tabindex="0" role="button"
                aria-label="Archive Database">
                <div class="icon-img"><i data-lucide="database" width="64" height="64"></i></div>
                <div data-i18n="icon_archive" class="icon-label">FIRST LIGHT: ARCHIVE_DB.EXE</div>
            </div>

            <div class="desktop-icon" data-window="win-employees" tabindex="0" role="button"
                aria-label="Employee Database">
                <div class="icon-img"><i data-lucide="users" width="64" height="64"></i></div>
                <div data-i18n="icon_employees" class="icon-label">EMPLOYEE_DB.EXE</div>
            </div>

            <div class="desktop-icon" data-window="win-shop" tabindex="0" role="button" aria-label="Event Log">
                <div class="icon-img"><i data-lucide="calendar" width="64" height="64"></i></div>
                <div data-i18n="icon_shop" class="icon-label">EVENT_LOG.TXT</div>
            </div>

            <div class="desktop-icon" data-window="win-comm" tabindex="0" role="button" aria-label="Communication">
                <div class="icon-img"><i data-lucide="radio" width="64" height="64"></i></div>
                <div data-i18n="icon_comm" class="icon-label">COMMUNICATION.EXE</div>
            </div>

            <div class="desktop-icon" data-window="win-settings" tabindex="0" role="button"
                aria-label="System Settings">
                <div class="icon-img"><i data-lucide="settings" width="64" height="64"></i></div>
                <div data-i18n="icon_settings" class="icon-label">SYSTEM_SETTINGS.EXE</div>
            </div>

            <div class="desktop-icon" data-window="win-interest" tabindex="0" role="button" aria-label="Interest Check">
                <div class="icon-img"><i data-lucide="clipboard-list" width="64" height="64"></i></div>
                <div data-i18n="icon_interest" class="icon-label">INTEREST_CHECK.EXE</div>
            </div>

            <div class="desktop-icon" data-window="win-tos" tabindex="0" role="button" aria-label="Terms of Service">
                <div class="icon-img"><i data-lucide="file-check" width="64" height="64"></i></div>
                <div data-i18n="icon_tos" class="icon-label">TERMS_OF_SERVICE.TXT</div>
            </div>

            <!-- NEW: ASSISTANT WIDGET -->
            <div class="desktop-icon" onclick="System.openAssistant(); AudioManager.play('click')" tabindex="0"
                role="button" aria-label="Open AI Assistant">
                <div class="icon-img"><i data-lucide="bot" width="64" height="64"></i></div>
                <div data-i18n="icon_assistant" class="icon-label">ASSISTANT_AI.EXE</div>
            </div>
        </div>

        <!-- WINDOW: OVERVIEW -->
        <div id="win-overview" class="os-window">
            <div class="window-header">
                <div class="flex-center">
                    <div class="mobile-back-btn" onclick="WindowManager.close('win-overview')" aria-label="Back"
                        role="button" tabindex="0"><i data-lucide="arrow-left" width="36" height="36"></i></div>
                    <span data-i18n="win_overview" class="win-title">PROJECT_BRIEF.LOG</span>
                </div>
                <div class="win-controls">
                    <div class="win-btn" aria-label="Minimize Window" onclick="WindowManager.minimize('win-overview')"
                        role="button" tabindex="0">
                        <i data-lucide="minus" width="14"></i>
                    </div>
                    <div class="win-btn" aria-label="Maximize Window"
                        onclick="WindowManager.toggleMaximize('win-overview')" role="button" tabindex="0"><i
                            data-lucide="maximize" width="14"></i>
                    </div>
                    <div class="win-btn close" aria-label="Close Window" onclick="WindowManager.close('win-overview')"
                        role="button" tabindex="0">
                        <i data-lucide="x" width="14"></i>
                    </div>
                </div>
            </div>
            <div class="window-content">

                <div class="brief-meta">
                    <span data-i18n="brief_id">ID: 001-GENESIS-DIVINA</span>
                    <span data-i18n="brief_clearance">CLEARANCE: PUBLIC</span>
                </div>

                <div class="brief-layout">
                    <!-- Left Column: Text -->
                    <div class="brief-text-col">
                        <h1 data-i18n="overview_title"
                            style="font-family: 'Cinzel'; font-size: 2.5rem; margin-bottom: 25px; color: var(--gold-primary); text-shadow: 0 0 10px rgba(212,175,55,0.2);">
                            DISTORTION DIVINA</h1>

                        <!-- GOAL SECTION -->
                        <div class="brief-section-title" data-i18n="overview_label_goal">GOAL</div>
                        <p data-i18n="overview_text_1"
                            style="margin-bottom: 10px; line-height: 1.6; color: #ccc; font-size: 1.1rem;">
                            Distortion Divina is an unofficial fan project inspired by the worlds of Project Moon
                            and Project Mili. Our dream is to build a collectible, tarot-inspired card game- created
                            by fans, for fans.
                        </p>

                        <!-- PLAN SECTION -->
                        <div class="brief-section-title" data-i18n="overview_label_plan">PLAN</div>
                        <p data-i18n="overview_text_plan" style="line-height: 1.6; color: #aaa; font-size: 1.1rem;">
                            We are building this vision in phases. Our first chapter, First Light, is dedicated to
                            proving our creative process. Our priority right now is simply to deliver stunning,
                            high-quality illustrations that pay proper homage to the source material.
                        </p>

                        <!-- ACQUISITION SECTION -->
                        <div class="brief-section-title" data-i18n="overview_label_acquisition">ACQUISITION</div>
                        <p data-i18n="overview_text_acquisition"
                            style="margin-bottom: 15px; line-height: 1.6; color: #ccc; font-size: 1.1rem;">
                            First Light packs will be available exclusively at upcoming offline events. Check our
                            schedule for locations.
                        </p>
                        <button class="shop-link-btn"
                            onclick="WindowManager.close('win-overview'); WindowManager.open('win-shop'); AudioManager.play('click');"
                            data-i18n="btn_check_events" aria-label="View Event Schedule">
                            [ VIEW EVENT SCHEDULE ]
                        </button>

                        <!-- NOTE SECTION (Smaller) -->
                        <p data-i18n="overview_text_note" class="brief-note">
                            This is a passion project currently running on personal funds. Every penny of profit
                            goes directly to our amazing artists and brings us one step closer to the full game. We
                            hope you'll join us on this journey.
                        </p>
                    </div>

                    <!-- Right Column: Image Area -->
                    <div class="brief-visual-col">
                        <div class="brief-frame">
                            <div style="position: relative; width: 100%; height: 300px; background: #000; cursor: pointer;"
                                onclick="System.changeBriefImage(1)" title="Click for Next Image" role="button"
                                aria-label="Click to view next image">
                                <!-- Carousel Arrows -->
                                <div class="brief-nav-btn brief-nav-prev"
                                    onclick="event.stopPropagation(); System.changeBriefImage(-1)"><i
                                        data-lucide="chevron-left" width="20"></i></div>
                                <div class="brief-nav-btn brief-nav-next"
                                    onclick="event.stopPropagation(); System.changeBriefImage(1)"><i
                                        data-lucide="chevron-right" width="20"></i></div>

                                <!-- Updated Initial Image Source -->
                                <img id="brief-img-display" src="https://i.imgur.com/JtNx9pE.jpeg" class="brief-img"
                                    alt="Project Visual" style="height: 100%; object-fit: cover;"
                                    onerror="this.style.display='none'">
                            </div>
                            <div id="brief-caption-display" class="brief-caption" data-i18n="brief_fig_main">FIG_0:
                                PROJECT_CONCEPT</div>

                            <!-- Image Counter -->
                            <div id="brief-img-counter"
                                style="text-align: center; font-size: 0.75rem; color: #666; margin-top: 5px; font-family: 'Share Tech Mono';">
                                [ 1 / 5 ]</div>
                        </div>

                        <div
                            style="margin-top: 20px; border: 1px dashed #333; padding: 15px; font-size: 0.85rem; color: #666;">
                            <div style="color: var(--terminal-green); margin-bottom: 8px;"
                                data-i18n="brief_sys_notes_label">> SYSTEM NOTES:</div>
                            <span data-i18n="brief_sys_notes">The "First Light" initiative is currently active. All
                                personnel are advised to review the Archive DB for drop rates.</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <!-- WINDOW: ARCHIVE -->
        <div id="win-archive" class="os-window">
            <div class="window-header">
                <div class="flex-center">
                    <div class="mobile-back-btn" onclick="WindowManager.close('win-archive')" aria-label="Back"
                        role="button" tabindex="0"><i data-lucide="arrow-left" width="36" height="36"></i></div>
                    <span data-i18n="win_archive" class="win-title">FIRST LIGHT: ARCHIVE_DB.EXE</span>
                </div>
                <div class="win-controls">
                    <div class="win-btn" aria-label="Minimize Window" onclick="WindowManager.minimize('win-archive')"
                        role="button" tabindex="0"><i data-lucide="minus" width="14"></i></div>
                    <div class="win-btn" aria-label="Maximize Window"
                        onclick="WindowManager.toggleMaximize('win-archive')" role="button" tabindex="0"><i
                            data-lucide="maximize" width="14"></i>
                    </div>
                    <div class="win-btn close" aria-label="Close Window" onclick="WindowManager.close('win-archive')"
                        role="button" tabindex="0"><i data-lucide="x" width="14"></i></div>
                </div>
            </div>
            <div class="window-content">
                <div class="archive-header">
                    <div class="archive-header-img">
                        <img src="./images/q4swynn.png" style="width: 100%; height: 100%; object-fit: cover;"
                            onerror="this.src='https://placehold.co/200x300/000/333?text=Error'"
                            alt="Archive Header Image" loading="lazy" decoding="async">
                    </div>
                    <div class="archive-header-text">
                        <h2 data-i18n="archive_title">FIRST LIGHT</h2>
                        <p data-i18n="archive_desc">The initial manifestation. A collection of archetypes emerging
                            from the distortion. Witness the beginning of the reconstruction.</p>

                        <div class="rates-dashboard">
                            <!-- MOVED & STYLED DISTRIBUTION NOTICE -->
                            <div
                                style="margin-bottom: 25px; padding: 15px; border: 1px solid var(--terminal-green); background: rgba(51, 255, 0, 0.05); font-size: 0.95rem; color: #ddd; line-height: 1.5; box-shadow: 0 0 20px rgba(51, 255, 0, 0.1);">
                                <div
                                    style="color: var(--terminal-green); font-weight: bold; margin-bottom: 8px; display: flex; align-items: center; gap: 8px; font-family: 'Share Tech Mono'; letter-spacing: 1px;">
                                    <i data-lucide="alert-triangle" width="16"></i>
                                    <span data-i18n="archive_dist_proto_label">>> DISTRIBUTION PROTOCOL:</span>
                                </div>
                                <span data-i18n="archive_dist_proto">First Light is distributed in sealed packs of 5
                                    cards (4 Normal, 1 Holographic). Contents are randomized by the system;
                                    individual selection is not permitted. May the luck of the draw be with
                                    you.</span>
                            </div>

                            <!-- NEW: LINK TO EVENT LOG -->
                            <button class="shop-link-btn"
                                style="width: 100%; margin-top: 0; margin-bottom: 25px; text-align: center; justify-content: center; display: flex; gap: 10px;"
                                onclick="WindowManager.close('win-archive'); WindowManager.open('win-shop'); AudioManager.play('click');"
                                aria-label="Where to Acquire">
                                <i data-lucide="map-pin" width="16"></i> <span data-i18n="btn_where_to_buy">[ WHERE
                                    TO ACQUIRE ]</span>
                            </button>

                            <div class="rates-section">
                                <div class="rates-section-title" data-i18n="rates_title">PACK CONFIGURATION</div>
                                <div class="pack-config">
                                    <div class="config-badge holo">
                                        <i data-lucide="sparkles" width="18"></i> <span
                                            data-i18n="rates_content_holo">1x HOLOGRAPHIC</span>
                                    </div>
                                    <div class="config-badge norm">
                                        <i data-lucide="layers" width="18"></i> <span data-i18n="rates_content_norm">4x
                                            NORMAL</span>
                                    </div>
                                </div>
                                <div style="font-size: 0.9rem; color: #666; margin-top: 8px;"
                                    data-i18n="rates_total_count">Total: 9 Holo / 29 Normal</div>
                            </div>

                            <div class="rates-section">
                                <div class="rates-section-title" data-i18n="rates_drop_title">DROP RATES (PER SLOT)
                                </div>
                                <div class="rates-grid">
                                    <div class="rate-card holo">
                                        <span class="rate-label" data-i18n="rates_holo_label">SPECIFIC HOLO</span>
                                        <span class="rate-value">11.1%</span>
                                        <span class="rate-sub">1 / 9</span>
                                    </div>
                                    <div class="rate-card norm">
                                        <span class="rate-label" data-i18n="rates_norm_label">SPECIFIC NORMAL</span>
                                        <span class="rate-value">3.57%</span>
                                        <span class="rate-sub">1 / 29</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div
                    style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #333; padding-bottom: 15px; margin-bottom: 20px;">
                    <div style="font-size: 1rem; color: #666;"><span data-i18n="archive_status">> LOADING ASSETS...
                            COMPLETE</span></div>

                    <!-- NEW SORT CONTROLS -->
                    <div class="archive-controls" style="margin-bottom: 0;">
                        <button class="archive-btn" onclick="System.renderGrid('id', this)" data-i18n="btn_sort_tarot"
                            aria-label="Sort by Tarot Number">[ SORT: TAROT ]</button>
                        <button class="archive-btn" onclick="System.renderGrid('name', this)" data-i18n="btn_sort_name"
                            aria-label="Sort Alphabetically">[ SORT: A-Z ]</button>
                        <button class="archive-btn active" onclick="System.renderGrid('all', this)"
                            data-i18n="btn_view_all" aria-label="View All Cards">[ VIEW: ALL ]</button>
                    </div>
                </div>

                <div class="archive-grid" id="cardGrid"></div>
            </div>
        </div>

        <!-- WINDOW: VARIANT SELECTOR -->
        <div id="win-selector" class="os-window" style="display: none;">
            <div class="window-header">
                <div class="flex-center">
                    <div class="mobile-back-btn" onclick="WindowManager.close('win-selector')" aria-label="Back"
                        role="button" tabindex="0"><i data-lucide="arrow-left" width="36" height="36"></i></div>
                    <span class="win-title" style="color: var(--gold-primary);">VARIANT_SELECTOR.EXE</span>
                </div>
                <div class="win-controls">
                    <div class="win-btn" onclick="WindowManager.toggleMaximize('win-selector')"
                        aria-label="Maximize Window" role="button" tabindex="0"><i data-lucide="maximize"
                            width="14"></i></div>
                    <div class="win-btn close" aria-label="Close Window" onclick="WindowManager.close('win-selector')"
                        role="button" tabindex="0">
                        <i data-lucide="x" width="14"></i>
                    </div>
                </div>
            </div>
            <div class="window-content">
                <h2 id="selector-title"
                    style="font-family: 'Cinzel'; color: white; margin-bottom: 10px; font-size: 2rem;">SELECT
                    VARIANT</h2>
                <p data-i18n="selector_sub" style="color: #888; font-size: 1rem; margin-bottom: 25px;">Multiple data
                    streams detected. Select a timeline to view.</p>
                <div id="selector-grid" class="selector-grid"></div>
            </div>
        </div>

        <!-- WINDOW: EMPLOYEES -->
        <div id="win-employees" class="os-window">
            <div class="window-header">
                <div class="flex-center">
                    <div class="mobile-back-btn" onclick="WindowManager.close('win-employees')" aria-label="Back"
                        role="button" tabindex="0"><i data-lucide="arrow-left" width="36" height="36"></i></div>
                    <span data-i18n="win_employees" class="win-title">EMPLOYEE_DB.EXE</span>
                </div>
                <div class="win-controls">
                    <div class="win-btn" aria-label="Minimize Window" onclick="WindowManager.minimize('win-employees')"
                        role="button" tabindex="0">
                        <i data-lucide="minus" width="14"></i>
                    </div>
                    <div class="win-btn" aria-label="Maximize Window"
                        onclick="WindowManager.toggleMaximize('win-employees')" role="button" tabindex="0"><i
                            data-lucide="maximize" width="14"></i></div>
                    <div class="win-btn close" aria-label="Close Window" onclick="WindowManager.close('win-employees')"
                        role="button" tabindex="0">
                        <i data-lucide="x" width="14"></i>
                    </div>
                </div>
            </div>
            <div class="window-content">
                <div style="margin-bottom: 25px; border-bottom: 1px solid var(--gold-dim); padding-bottom: 15px;">
                    <h2 data-i18n="employees_header"
                        style="font-family: 'Cinzel'; margin-bottom: 10px; font-size: 2rem;">PERSONNEL DATABASE</h2>
                    <div style="font-size: 1rem; color: var(--terminal-green);"><span data-i18n="emp_accessing">>
                            ACCESSING TEAM RECORDS...</span></div>
                </div>

                <div style="overflow-x: auto;">
                    <table class="employee-table">
                        <thead>
                            <tr>
                                <th data-i18n="th_no">NO.</th>
                                <th data-i18n="th_card">CARD</th>
                                <th data-i18n="th_char">CHARACTER</th>
                                <th data-i18n="th_emp">EMPLOYEES</th>
                                <th data-i18n="th_pen">PEN NAME</th>
                                <th data-i18n="th_role">ROLE</th>
                            </tr>
                        </thead>
                        <tbody id="employee-list-body">
                            <!-- JS Populated -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- WINDOW: SHOP / EVENTS -->
        <div id="win-shop" class="os-window">
            <div class="window-header">
                <div class="flex-center">
                    <div class="mobile-back-btn" onclick="WindowManager.close('win-shop')" aria-label="Back"
                        role="button" tabindex="0"><i data-lucide="arrow-left" width="36" height="36"></i></div>
                    <span data-i18n="icon_shop" class="win-title">EVENT_LOG.TXT</span>
                </div>
                <div class="win-controls">
                    <div class="win-btn" aria-label="Minimize Window" onclick="WindowManager.minimize('win-shop')"
                        role="button" tabindex="0">
                        <i data-lucide="minus" width="14"></i>
                    </div>
                    <div class="win-btn" aria-label="Maximize Window" onclick="WindowManager.toggleMaximize('win-shop')"
                        role="button" tabindex="0"><i data-lucide="maximize" width="14"></i>
                    </div>
                    <div class="win-btn close" aria-label="Close Window" onclick="WindowManager.close('win-shop')"
                        role="button" tabindex="0">
                        <i data-lucide="x" width="14"></i>
                    </div>
                </div>
            </div>
            <div class="window-content">
                <h2 data-i18n="shop_header" style="font-family: 'Cinzel'; margin-bottom: 25px; font-size: 2rem;">
                    UPCOMING EVENTS</h2>

                <!-- Event 1: Lunatic Moonlight -->
                <div class="shop-item" style="display: flex; gap: 25px; align-items: flex-start;">
                    <div style="flex: 1;">
                        <h3 data-i18n="event_1_title" style="color: #fff; font-size: 1.5rem;">LUNATIC MOONLIGHT
                            EVENT</h3>

                        <div
                            style="margin: 15px 0; font-size: 1rem; color: #aaa; border-left: 2px solid var(--gold-dim); padding-left: 15px;">
                            <p data-i18n="event_1_loc" style="margin-bottom: 6px;">LOCATION: TOKYO</p>
                            <p style="color: var(--terminal-green); font-weight: bold; margin-bottom: 6px;"
                                data-i18n="event_1_booth">BOOTH: A14 (DISTORTION CORP)</p>
                            <p style="color: #ccc;" data-i18n="event_1_time">TIME: 11:30 - 16:00</p>
                        </div>

                        <!-- COUNTDOWN 1 -->
                        <div id="countdown-1" class="event-countdown">CALCULATING T-MINUS...</div>

                        <div data-i18n="event_1_date"
                            style="font-size: 1.4rem; color: var(--gold-primary); margin-top: 15px;">15 FEB 2026
                        </div>

                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <a href="https://lunaticmoonight.jimdosite.com" target="_blank" class="shop-link-btn"
                                data-i18n="btn_event_site" aria-label="Visit Lunatic Moonlight Website">[ EVENT
                                WEBSITE ]</a>
                            <a href="https://lunaticmoonight.jimdosite.com/%E3%82%B5%E3%83%BC%E3%82%AF%E3%83%AB%E3%83%AA%E3%82%B9%E3%83%88/"
                                target="_blank" class="shop-link-btn" data-i18n="btn_booth_map"
                                aria-label="View Booth Map">[ BOOTH MAP ]</a>
                        </div>
                    </div>

                    <!-- Event Image Section -->
                    <div
                        style="flex: 0 0 140px; border: 1px solid var(--gold-dim); height: 140px; background: #000; overflow: hidden;">
                        <img src="./images/5lrfk3j.jpeg" style="width: 100%; height: 100%; object-fit: cover;"
                            alt="Event Visual" loading="lazy" decoding="async">
                    </div>
                </div>

                <!-- Event 2: One Million Moon -->
                <div class="shop-item" style="display: flex; gap: 25px; align-items: flex-start;">
                    <div style="flex: 1;">
                        <h3 data-i18n="event_2_title" style="color: #fff; font-size: 1.5rem;">ONE MILLION MOON
                            CONCERT</h3>
                        <p data-i18n="event_2_loc" style="color: #888; font-size: 1rem; margin: 10px 0;">LOCATION:
                            JAPAN</p>

                        <!-- COUNTDOWN 2 -->
                        <div id="countdown-2" class="event-countdown" style="margin-bottom: 12px;">CALCULATING
                            T-MINUS...</div>

                        <div data-i18n="event_2_date"
                            style="font-size: 1.4rem; color: var(--gold-primary); margin-top: 8px;">21 FEB 2026
                        </div>
                        <a href="https://global.onemillionmoons.kr" target="_blank" class="shop-link-btn"
                            data-i18n="btn_event_site" aria-label="Visit One Million Moon Website">[ EVENT WEBSITE
                            ]</a>
                    </div>

                    <!-- Event Image Section -->
                    <div
                        style="flex: 0 0 140px; border: 1px solid var(--gold-dim); height: 140px; background: #000; overflow: hidden;">
                        <img src="./images/5lzvsjg.png" style="width: 100%; height: 100%; object-fit: cover;"
                            alt="Event Visual" loading="lazy" decoding="async">
                    </div>
                </div>

                <!-- Event 3 -->
                <div class="shop-item" style="border-color: var(--gold-primary); background: rgba(212,175,55,0.05);">
                    <h3 data-i18n="event_3_title" style="color: #fff; font-size: 1.5rem;">ONLINE STORE OPENING</h3>
                    <p data-i18n="event_3_desc"
                        style="color: var(--terminal-green); font-size: 1.1rem; margin: 15px 0;">STATUS: COMING SOON
                    </p>
                </div>
            </div>
        </div>

        <!-- WINDOW: COMMUNICATION -->
        <div id="win-comm" class="os-window">
            <div class="window-header">
                <div class="flex-center">
                    <div class="mobile-back-btn" onclick="WindowManager.close('win-comm')" aria-label="Back"
                        role="button" tabindex="0"><i data-lucide="arrow-left" width="36" height="36"></i></div>
                    <span data-i18n="win_comm" class="win-title">COMMUNICATION.EXE</span>
                </div>
                <div class="win-controls">
                    <div class="win-btn" aria-label="Minimize Window" onclick="WindowManager.minimize('win-comm')"
                        role="button" tabindex="0">
                        <i data-lucide="minus" width="14"></i>
                    </div>
                    <div class="win-btn" aria-label="Maximize Window" onclick="WindowManager.toggleMaximize('win-comm')"
                        role="button" tabindex="0"><i data-lucide="maximize" width="14"></i>
                    </div>
                    <div class="win-btn close" aria-label="Close Window" onclick="WindowManager.close('win-comm')"
                        role="button" tabindex="0">
                        <i data-lucide="x" width="14"></i>
                    </div>
                </div>
            </div>
            <div class="window-content">
                <h2 data-i18n="comm_header" style="font-family: 'Cinzel'; margin-bottom: 25px; font-size: 2rem;">
                    SECURE UPLINKS</h2>

                <!-- Twitter -->
                <div class="shop-item">
                    <h3 style="color: #fff; display: flex; align-items: center; gap: 10px;">
                        <i data-lucide="twitter" width="24" height="24"></i>
                        <span data-i18n="comm_twitter">TWITTER // X</span>
                    </h3>
                    <p data-i18n="comm_sub_twitter" style="color: #888; font-size: 1rem; margin: 8px 0;">> ENCRYPTED
                        FEED ESTABLISHED</p>
                    <a href="https://x.com/DistortDivina" target="_blank" class="shop-link-btn" data-i18n="btn_visit"
                        aria-label="Visit Twitter Page">[ VISIT LINK ]</a>
                </div>

                <!-- Discord -->
                <div class="shop-item">
                    <h3 style="color: #fff; display: flex; align-items: center; gap: 10px;">
                        <i data-lucide="message-circle" width="24" height="24"></i>
                        <span data-i18n="comm_discord">DISCORD SERVER</span>
                    </h3>
                    <p data-i18n="comm_sub_discord" style="color: #888; font-size: 1rem; margin: 8px 0;">> SECURE
                        CHANNEL OPEN</p>
                    <a href="https://discord.gg/GNb5HcMddP" target="_blank" class="shop-link-btn" data-i18n="btn_visit"
                        aria-label="Join Discord Server">[ VISIT LINK ]</a>
                </div>

                <!-- Email -->
                <div class="shop-item">
                    <h3 style="color: #fff; display: flex; align-items: center; gap: 10px;">
                        <i data-lucide="mail" width="24" height="24"></i>
                        <span data-i18n="comm_email">EMAIL UPLINK</span>
                    </h3>
                    <p data-i18n="comm_sub_email" style="color: #888; font-size: 1rem; margin: 8px 0;">> DIRECT
                        FREQUENCY OPEN</p>
                    <a href="mailto:divinadistortion@gmail.com" class="shop-link-btn" data-i18n="btn_email"
                        aria-label="Send Email">[ SEND TRANSMISSION ]</a>

                    <!-- Manual Copy Fallback -->
                    <div
                        style="margin-top: 15px; background: rgba(0,0,0,0.6); padding: 10px; border: 1px dashed var(--gold-dim); display: flex; align-items: center; gap: 10px;">
                        <i data-lucide="at-sign" width="16" color="var(--terminal-green)"></i>
                        <span
                            style="color: var(--terminal-green); font-family: 'Share Tech Mono'; user-select: text; -webkit-user-select: text;">divinadistortion@gmail.com</span>
                    </div>
                </div>

                <!-- Admin Personal -->
                <div class="shop-item">
                    <h3 style="color: #fff; display: flex; align-items: center; gap: 10px;">
                        <i data-lucide="shield" width="24" height="24"></i>
                        <span data-i18n="comm_admin">ADMIN DIRECT LINE</span>
                    </h3>
                    <p data-i18n="comm_sub_admin_1" style="color: #888; font-size: 1rem; margin: 8px 0;">> OVERSEER:
                        oober</p>
                    <p data-i18n="comm_sub_admin_2"
                        style="color: #aaa; font-size: 0.9rem; margin-bottom: 12px; font-style: italic;">"Feel free
                        to add and ask me any questions."</p>
                    <div
                        style="background: rgba(0,0,0,0.6); padding: 10px; border: 1px dashed var(--gold-dim); display: flex; align-items: center; gap: 10px;">
                        <i data-lucide="user" width="16" color="var(--terminal-green)"></i>
                        <span style="color: var(--terminal-green); font-family: 'Share Tech Mono';">DISCORD ID:
                            oober</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- WINDOW: SETTINGS -->
        <div id="win-settings" class="os-window">
            <div class="window-header">
                <div class="flex-center">
                    <div class="mobile-back-btn" onclick="WindowManager.close('win-settings')" aria-label="Back"
                        role="button" tabindex="0"><i data-lucide="arrow-left" width="36" height="36"></i></div>
                    <span data-i18n="win_settings" class="win-title">SYSTEM_SETTINGS.EXE</span>
                </div>
                <div class="win-controls">
                    <div class="win-btn" aria-label="Minimize Window" onclick="WindowManager.minimize('win-settings')"
                        role="button" tabindex="0">
                        <i data-lucide="minus" width="14"></i>
                    </div>
                    <div class="win-btn" aria-label="Maximize Window"
                        onclick="WindowManager.toggleMaximize('win-settings')" role="button" tabindex="0"><i
                            data-lucide="maximize" width="14"></i>
                    </div>
                    <div class="win-btn close" aria-label="Close Window" onclick="WindowManager.close('win-settings')"
                        role="button" tabindex="0">
                        <i data-lucide="x" width="14"></i>
                    </div>
                </div>
            </div>
            <div class="window-content">
                <h2 data-i18n="settings_header" style="font-family: 'Cinzel'; margin-bottom: 25px; font-size: 2rem;">
                    CONFIGURATION</h2>

                <div class="shop-item">
                    <h3 style="color: #fff; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                        <i data-lucide="globe" width="20"></i>
                        <span data-i18n="lang_select">LANGUAGE PROTOCOL</span>
                    </h3>
                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                        <button class="lang-btn" onclick="System.setLanguage('en'); AudioManager.play('click')"
                            aria-label="Select English">EN</button>
                        <button class="lang-btn" onclick="System.setLanguage('ko'); AudioManager.play('click')"
                            aria-label="Select Korean">한국어</button>
                        <button class="lang-btn" onclick="System.setLanguage('ja'); AudioManager.play('click')"
                            aria-label="Select Japanese">日本語</button>
                    </div>

                    <!-- UI SCALE IN SETTINGS -->
                    <div style="margin-top: 25px; padding-top: 20px; border-top: 1px dashed #333;">
                        <h3 style="color: #fff; margin-bottom: 15px; font-size: 1rem;">INTERFACE SCALING</h3>
                        <button class="ui-scale-btn" style="margin-left: 0;" onclick="System.toggleUIScale()"
                            aria-label="Toggle Interface Size">
                            [TOGGLE SIZE]
                        </button>
                    </div>

                    <p data-i18n="settings_note"
                        style="color: #666; font-size: 0.9rem; margin-top: 15px; border-top: 1px dashed #333; padding-top: 10px;">
                        > SYSTEM UPDATE: IMMEDIATE<br>
                        > REBOOT NOT REQUIRED
                    </p>
                    <p data-i18n="settings_disclaimer"
                        style="color: #555; font-size: 0.85rem; margin-top: 10px; font-style: italic;">
                        > NOTICE: Localization is approximate and may contain deviations.
                    </p>
                </div>
            </div>
        </div>

        <!-- WINDOW: TOS -->
        <div id="win-tos" class="os-window">
            <div class="window-header">
                <div class="flex-center">
                    <div class="mobile-back-btn" onclick="WindowManager.close('win-tos')" aria-label="Back"
                        role="button" tabindex="0"><i data-lucide="arrow-left" width="36" height="36"></i></div>
                    <span data-i18n="win_tos" class="win-title">TERMS_OF_SERVICE.TXT</span>
                </div>
                <div class="win-controls">
                    <div class="win-btn" aria-label="Minimize Window" onclick="WindowManager.minimize('win-tos')"
                        role="button" tabindex="0"><i data-lucide="minus" width="14"></i></div>
                    <div class="win-btn" aria-label="Maximize Window" onclick="WindowManager.toggleMaximize('win-tos')"
                        role="button" tabindex="0">
                        <i data-lucide="maximize" width="14"></i>
                    </div>
                    <div class="win-btn close" aria-label="Close Window" onclick="WindowManager.close('win-tos')"
                        role="button" tabindex="0"><i data-lucide="x" width="14"></i></div>
                </div>
            </div>
            <div class="window-content">
                <h2 data-i18n="tos_header" style="font-family: 'Cinzel'; margin-bottom: 25px; font-size: 2rem;">
                    TERMS OF SERVICE</h2>
                <p data-i18n="tos_content"
                    style="line-height: 1.6; color: #aaa; margin-bottom: 35px; font-size: 1.1rem;">
                    Distortion Divina is an unofficial fan project inspired by the worlds of Project Moon and
                    Project Mili. All rights belong to the individual owners and artists.
                </p>

                <div style="border-top: 1px solid var(--gold-dim); padding-top: 25px;">
                    <h3 data-i18n="tos_guidelines_header" style="color: #fff; font-size: 1.1rem; margin-bottom: 20px;">
                        OFFICIAL GUIDELINES</h3>

                    <div style="margin-bottom: 20px;">
                        <p data-i18n="tos_pm" style="color: #888; font-size: 1rem; margin-bottom: 8px;">PROJECT MOON
                        </p>
                        <a href="https://x.com/ProjMoonStudio/status/1629085462236397573?lang=en" target="_blank"
                            class="shop-link-btn" data-i18n="btn_guidelines" aria-label="View Project Moon Guidelines">[
                            VIEW GUIDELINES ]</a>
                    </div>

                    <div>
                        <p data-i18n="tos_mili" style="color: #888; font-size: 1rem; margin-bottom: 8px;">PROJECT
                            MILI</p>
                        <a href="https://projectmili.com/copyright-guidelines" target="_blank" class="shop-link-btn"
                            data-i18n="btn_guidelines" aria-label="View Project Mili Guidelines">[ VIEW GUIDELINES
                            ]</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- WINDOW: INTEREST CHECK (RESTORED) -->
        <div id="win-interest" class="os-window">
            <div class="window-header">
                <div class="flex-center">
                    <div class="mobile-back-btn" onclick="WindowManager.close('win-interest')" aria-label="Back"
                        role="button" tabindex="0">
                        <i data-lucide="arrow-left" width="36" height="36"></i>
                    </div>
                    <span data-i18n="win_interest" class="win-title">INTEREST_CHECK.EXE</span>
                </div>
                <div class="win-controls">
                    <div class="win-btn" aria-label="Minimize Window" onclick="WindowManager.minimize('win-interest')"
                        role="button" tabindex="0">
                        <i data-lucide="minus" width="14"></i>
                    </div>
                    <div class="win-btn" aria-label="Maximize Window"
                        onclick="WindowManager.toggleMaximize('win-interest')" role="button" tabindex="0">
                        <i data-lucide="maximize" width="14"></i>
                    </div>
                    <div class="win-btn close" aria-label="Close Window" onclick="WindowManager.close('win-interest')"
                        role="button" tabindex="0">
                        <i data-lucide="x" width="14"></i>
                    </div>
                </div>
            </div>
            <div class="window-content flex-col-center">
                <h2 data-i18n="interest_header" class="cinzel-header">
                    INTEREST CHECK FORM</h2>
                <p data-i18n="interest_desc"
                    style="color: #ccc; margin-bottom: 30px; line-height: 1.6; max-width: 80%;">
                    Please indicate your interest in purchasing First Light packs. This data will be used to
                    determine print run quantities.
                </p>
                <a href="https://forms.gle/3hcPFeeMKDPCFpRQA" target="_blank" class="shop-link-btn"
                    style="padding: 15px 30px; font-size: 1.1rem;" data-i18n="btn_interest">
                    [ OPEN FORM ]
                </a>
            </div>
        </div>

        <!-- WINDOW: VIEWER -->
        <div id="win-viewer" class="os-window" style="display: none;">
            <div class="window-header" style="background: var(--gold-dim); color: black;">
                <div class="flex-center">
                    <div class="mobile-back-btn" onclick="WindowManager.close('win-viewer')" aria-label="Back"
                        role="button" tabindex="0"><i data-lucide="arrow-left" width="36" height="36" color="black"></i>
                    </div>
                    <span data-i18n="viewer_title" class="win-title" style="color:black">ARTIFACT_VIEWER.EXE</span>
                </div>
                <div class="win-controls">
                    <div class="win-btn" style="border-color: black; color: black;"
                        onclick="WindowManager.toggleMaximize('win-viewer')" aria-label="Maximize Window" role="button"
                        tabindex="0"><i data-lucide="maximize" width="14"></i></div>
                    <div class="win-btn close" style="border-color: black; color: black;" aria-label="Close Window"
                        onclick="WindowManager.close('win-viewer')" role="button" tabindex="0"><i data-lucide="x"
                            width="14"></i></div>
                </div>
            </div>
            <div class="window-content">
                <div class="viewer-layout" style="display:flex; flex-direction:column; height:100%; gap:30px;">

                    <!-- 3D STAGE CONTAINER -->
                    <div class="viewer-stage" id="viewer-stage">
                        <div id="viewer-loader"
                            style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); color:var(--terminal-green); display:none; font-size: 1.5rem;">
                            LOADING...</div>

                        <!-- Wrapper for 3D Transforms -->
                        <div class="viewer-card-wrapper" id="viewer-card-wrapper">
                            <img id="viewer-img" src=""
                                onerror="this.src='https://placehold.co/400x600/000/333?text=ASSET+MISSING'"
                                alt="Artifact Image">
                        </div>

                        <!-- Floating Controls -->
                        <div class="viewer-controls-overlay">
                            <button class="v-btn" onclick="Viewer3D.adjustZoom(-0.2)" title="Zoom Out"
                                aria-label="Zoom Out"><i data-lucide="minus" width="20"></i></button>
                            <span class="zoom-display" id="zoom-val">100%</span>
                            <button class="v-btn" onclick="Viewer3D.adjustZoom(0.2)" title="Zoom In"
                                aria-label="Zoom In"><i data-lucide="plus" width="20"></i></button>
                            <div style="width: 1px; height: 24px; background: #444; margin: 0 10px;"></div>
                            <button class="v-btn" onclick="Viewer3D.reset()" title="Reset View"
                                aria-label="Reset View"><i data-lucide="refresh-cw" width="20"></i></button>
                        </div>
                    </div>

                    <div class="viewer-info" style="flex:1;">
                        <div
                            style="border-bottom: 1px solid var(--gold-dim); padding-bottom: 15px; margin-bottom: 25px;">
                            <div style="font-size: 0.9rem; color: #666;"><span data-i18n="viewer_asset_id">ID:</span>
                                <span id="viewer-id"></span>
                            </div>
                            <h2 id="viewer-title"
                                style="font-family: 'Cinzel'; font-size: 2.5rem; color: var(--gold-primary);"></h2>
                        </div>
                        <p id="viewer-desc"
                            style="line-height: 1.6; color: #ccc; margin-bottom: 35px; font-size: 1.2rem;"></p>
                        <div style="background: rgba(255,255,255,0.05); padding: 20px;">
                            <h3 data-i18n="viewer_artist_label"
                                style="font-size: 1rem; color: #888; margin-bottom: 15px;">EMPLOYEE DATA</h3>
                            <div id="viewer-artist" style="font-size: 1.4rem; margin-bottom: 15px; color: white;">
                            </div>
                            <div id="viewer-socials" style="display: flex; gap: 15px; flex-wrap: wrap;"></div>
                        </div>
                    </div>
                </div>
            </div>
            <style>
                @media(min-width: 768px) {
                    #win-viewer .viewer-layout {
                        flex-direction: row !important;
                    }
                }
            </style>
        </div>

        <!-- ASSISTANT OVERLAY -->
        <div id="assistant-overlay">
            <div class="assistant-bubble">
                <button class="assistant-close-btn" onclick="System.closeAssistant()" aria-label="Close Assistant">
                    <i data-lucide="x" width="16" height="16"></i>
                </button>
                <!-- UPDATED NAME HERE -->
                <span id="assistant-text">Welcome, Agent. I am OOBOT. I can guide you through the archive.</span>
                <div class="assistant-controls">
                    <button class="assistant-btn" onclick="System.nextAssistantStep()" aria-label="Next Step">NEXT
                        ></button>
                    <button class="assistant-btn" onclick="System.closeAssistant()"
                        aria-label="Dismiss Assistant">DISMISS</button>
                </div>
            </div>
            <div class="assistant-avatar">
                <i data-lucide="cat" width="50" height="50" color="#D4AF37"></i>
            </div>
        </div>

        <!-- TASKBAR -->
        <div class="taskbar">
            <!-- Mobile Home Button -->
            <div class="mobile-home-btn" onclick="WindowManager.showDesktop()" aria-label="Show Desktop" role="button"
                tabindex="0">
                <i data-lucide="grid" width="24"></i>
            </div>

            <div class="start-btn" onmouseenter="AudioManager.play('hover')" onclick="AudioManager.play('click')"
                aria-label="System Menu" role="button" tabindex="0">
                <i data-lucide="power" width="20" height="20" style="margin-right: 8px;"></i> <span
                    data-i18n="btn_system">SYSTEM</span>
            </div>
            <div id="task-list" style="display:flex;"></div>

            <!-- SIGNAL WIDGET (Moved to Bottom Right) -->
            <div class="signal-widget">
                <!-- Bars ... -->
                <div class="signal-graph">
                    <div class="sig-bar"></div>
                    <div class="sig-bar"></div>
                    <div class="sig-bar"></div>
                    <div class="sig-bar"></div>
                </div>

                <!-- Data Text -->
                <div class="signal-data" style="display: none; @media(min-width:768px){display:flex;}">
                    <div class="sig-label" data-i18n="sig_hash">HASH</div>
                    <div class="enc-hash" id="enc-hash-display">A7F2-9X00</div>
                </div>

                <!-- Latency Text -->
                <div class="signal-data">
                    <div class="sig-label" data-i18n="sig_ping">PING</div>
                    <div class="sig-value" id="sig-latency">34ms</div>
                </div>

                <i data-lucide="lock" width="16" height="16" color="#444"></i>
            </div>
        </div>

    </div>
    </div>

    <!-- MODULAR SYSTEM -->
    <script type="module" src="js/main.js?v=nuclear"></script>

    <!-- EMERGENCY FAILSAFE SCRIPT -->
    <!-- EMERGENCY FAILSAFE SCRIPT -->
    <script>
        (function () {
            setTimeout(function () {
                var loader = document.getElementById('system-loader');
                if (loader) {
                    console.warn('Emergency Failsafe: Removing stuck loader.');
                    loader.style.opacity = '0';
                    loader.style.pointerEvents = 'none';
                    setTimeout(function () {
                        if (loader.parentNode) loader.parentNode.removeChild(loader);
                    }, 500);
                    // Also ensure login screen is visible if it was hidden
                    var login = document.getElementById('login-screen');
                    if (login && getComputedStyle(login).display === 'none' && !document.getElementById('desktop-screen').classList.contains('active')) {
                        login.style.display = 'flex';
                        login.style.opacity = '1';
                        // z-index handled by CSS
                    }
                }
            }, 3500); // 3.5 seconds absolute timeout (synced with animation)
        })();
    </script>
</body>

</html>
```